{"version":3,"sources":["../../src/controllers/authController.ts"],"sourcesContent":["import { NextFunction, Request, Response } from \"express\";\nimport { CreateUserDto } from \"@/dtos/userDto\";\nimport { RequestWithUser } from \"@/interfaces/authInterface\";\nimport { User } from \"@/interfaces/userInterface\";\nimport AuthService from \"@/services/authServices\";\n\nclass AuthController {\n    public authService = new AuthService();\n\n    public logIn = async (req: Request, res: Response, next: NextFunction) => {\n        try {\n            const { cookie, findUser, token } = await this.authService.login(req.body as CreateUserDto);\n            res.setHeader(\"Set-Cookie\", [cookie]);\n            res.status(200).json({ data: { findUser, token }, message: \"login\" });\n        } catch (error) {\n            next(error);\n        }\n    };\n\n    public logOut = async (req: RequestWithUser, res: Response, next: NextFunction) => {\n        try {\n            const logOutUserData: User = await this.authService.logout(req.user as User);\n\n            res.setHeader(\"Set-Cookie\", [\"Authorization=; Max-age=0\"]);\n            res.status(200).json({ data: logOutUserData, message: \"logout\" });\n        } catch (error) {\n            next(error);\n        }\n    };\n}\n\nexport default AuthController;"],"names":["AuthController","authService","AuthService","logIn","req","res","next","cookie","findUser","token","login","body","setHeader","status","json","data","message","error","logOut","logOutUserData","logout","user"],"mappings":";;;;+BA+BA;;aAAA;;uDA3BwB;;;;;;;;;;;;;;;;;;;AAExB,IAAA,AAAMA,iBAAN,MAAMA;;QACF,uBAAOC,eAAc,IAAIC,qBAAW;QAEpC,uBAAOC,SAAQ,OAAOC,KAAcC,KAAeC,OAAuB;YACtE,IAAI;gBACA,MAAM,EAAEC,OAAM,EAAEC,SAAQ,EAAEC,MAAK,EAAE,GAAG,MAAM,IAAI,CAACR,WAAW,CAACS,KAAK,CAACN,IAAIO,IAAI;gBACzEN,IAAIO,SAAS,CAAC,cAAc;oBAACL;iBAAO;gBACpCF,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAM;wBAAEP;wBAAUC;oBAAM;oBAAGO,SAAS;gBAAQ;YACvE,EAAE,OAAOC,OAAO;gBACZX,KAAKW;YACT;QACJ;QAEA,uBAAOC,UAAS,OAAOd,KAAsBC,KAAeC,OAAuB;YAC/E,IAAI;gBACA,MAAMa,iBAAuB,MAAM,IAAI,CAAClB,WAAW,CAACmB,MAAM,CAAChB,IAAIiB,IAAI;gBAEnEhB,IAAIO,SAAS,CAAC,cAAc;oBAAC;iBAA4B;gBACzDP,IAAIQ,MAAM,CAAC,KAAKC,IAAI,CAAC;oBAAEC,MAAMI;oBAAgBH,SAAS;gBAAS;YACnE,EAAE,OAAOC,OAAO;gBACZX,KAAKW;YACT;QACJ;;AACJ;MAEA,WAAejB"}